# エージェント起動トリガー

## 概要
このファイルは、メインエージェントが特定のパターンを検出した際に、適切なサブエージェントを提案・起動するためのガイドラインです。

---

## トリガーパターンとエージェントのマッピング

### 1. スキル化関連

**トリガーパターン**:
- ユーザーが「スキル化してください」と明示的に依頼
- 同じタスクが3回以上繰り返されたことを検出
- ユーザーが「この作業を自動化したい」と発言
- 「繰り返し作業を効率化」などのキーワード

**起動エージェント**: `skill_creator`

**起動手順**:
1. スキル化の必要性をユーザーに確認（繰り返し回数、複雑性など）
2. ユーザーが承認した場合、Task toolで skill_creator エージェントを起動（プロンプトにタスク指示を直接記載）
3. レスポンスで結果を確認し、ユーザーに報告

**判断基準**:
- ✅ 同じタスクが3回以上発生
- ✅ 複数ステップで構成される定型作業
- ✅ 明確な再利用性がある
- ❌ 1回限りのタスク
- ❌ 単純すぎる（1コマンドで完了）

---

### 2. フロントエンド実装関連

**トリガーパターン**:
- React コンポーネントの作成・修正依頼
- フロントエンドのUIに関する実装依頼
- Tailwind CSS を使ったスタイリング依頼

**起動エージェント**: `frontend_developer`

**起動手順**:
1. タスク内容を整理（TDD必須）
2. Task toolで frontend_developer エージェントを起動（プロンプトにタスク指示を直接記載）
3. 実装完了後、typescript_reviewer でレビュー

---

### 3. バックエンド実装関連

**トリガーパターン**:
- API エンドポイントの追加・修正依頼
- Express ルーティングの実装依頼
- データベースサービスの実装依頼

**起動エージェント**: `backend_developer`

**起動手順**:
1. タスク内容を整理（TDD必須）
2. Task toolで backend_developer エージェントを起動（プロンプトにタスク指示を直接記載）
3. 実装完了後、typescript_reviewer でレビュー

---

### 4. コードレビュー関連

**トリガーパターン**:
- 実装完了後（必須）
- ユーザーが明示的にレビューを依頼
- 「品質チェック」「動作確認」などのキーワード

**起動エージェント**: `typescript_reviewer`

**起動手順**:
1. レビュー対象ファイルを特定
2. Task toolで typescript_reviewer エージェントを起動（プロンプトにレビュー対象と変更内容を直接記載）
3. レスポンスのレビュー結果に基づいて修正または承認

---

## 自動提案の原則

### メインエージェントの判断基準

1. **ユーザーの明示的な依頼がある場合**
   - 即座に適切なエージェントを起動

2. **パターンを検出した場合**
   - ユーザーに提案し、承認を得てから起動
   - 例: 「このタスクは skill_creator でスキル化することをお勧めします」

3. **実装完了時**
   - typescript_reviewer によるレビューを自動的に提案（必須フロー）

### 注意事項

- **承認の原則**: ユーザーの承認なしにエージェントを起動しない
- **直接コミュニケーション**: タスク指示はプロンプトに直接記載し、結果はレスポンスで受け取る
- **TDDの徹底**: 開発エージェント（frontend/backend）は必ずTDDで実装
- **レビューの必須化**: 実装完了後は必ず typescript_reviewer でレビュー

---

## エージェント間連携のフロー

### パターンA: フロント + バック連携

```
1. frontend_developer 起動 → API必要性を検出（レスポンスで報告）
2. backend_developer 起動 → API実装（プロンプトにAPI要件を直接記載）
3. backend_developer が API完了をレスポンスで報告
4. frontend_developer が API統合を完了（2回目の起動）
5. typescript_reviewer でレビュー
```

### パターンB: メイン直接実装 + レビュー

```
1. メインエージェントが直接実装（TDD）
2. typescript_reviewer でレビュー（プロンプトにレビュー対象を直接記載）
3. 修正 or ユーザー承認
```

---

## 更新履歴

| 日付 | バージョン | 変更内容 |
|-----|----------|---------|
| 2026-02-13 | 2.0.0 | dashboard.md廃止、直接コミュニケーションに移行 |
| 2026-02-04 | 1.0.0 | 初版作成 |
